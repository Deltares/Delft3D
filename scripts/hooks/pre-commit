#!/bin/bash

# Auto-update .dvc files for modified directories
for dvc_file in $(git ls-files '*.dvc'); do
    tracked_dir="${dvc_file%.dvc}"
    
    if [ -d "$tracked_dir" ]; then
        if dvc status "$dvc_file" 2>/dev/null | grep -q "modified:"; then
            echo "Auto-updating DVC tracking for '$tracked_dir'..."
            dvc add "$tracked_dir"
            git add "$dvc_file"
        fi
    fi
done
